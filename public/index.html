<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GÃ¼venlik HaritasÄ± - GÃ¼venli Åehir UygulamasÄ±</title>
    <meta name="description"
        content="Ã‡evrenizdeki gÃ¼venlik noktalarÄ±nÄ± keÅŸfedin, konumunuzu paylaÅŸÄ±n ve gÃ¼venli rotalar oluÅŸturun.">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Privacy Consent Modal -->
    <div id="privacyModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ›¡ï¸ Gizlilik ve GÃ¼venlik</h2>
            </div>
            <div class="modal-body">
                <p class="privacy-intro">GÃ¼venlik HaritasÄ± uygulamasÄ±, gÃ¼venliÄŸinizi artÄ±rmak iÃ§in konumunuzu kullanÄ±r.
                </p>

                <div class="privacy-section">
                    <h3>ğŸ“ Konum Verileriniz</h3>
                    <ul>
                        <li>Konumunuz <strong>sadece sizin kontrolÃ¼nÃ¼zde</strong> paylaÅŸÄ±lÄ±r</li>
                        <li>Verileriniz <strong>ÅŸifrelenerek</strong> korunur</li>
                        <li>Ä°stediÄŸiniz zaman <strong>paylaÅŸÄ±mÄ± durdurabilirsiniz</strong></li>
                        <li>Verileriniz <strong>Ã¼Ã§Ã¼ncÃ¼ taraflarla paylaÅŸÄ±lmaz</strong></li>
                    </ul>
                </div>

                <div class="privacy-section">
                    <h3>âœ… HaklarÄ±nÄ±z (KVKV Uyumlu)</h3>
                    <ul>
                        <li>Verilerinize eriÅŸim hakkÄ±</li>
                        <li>Verilerin silinmesini talep etme hakkÄ±</li>
                        <li>Ä°zni geri Ã§ekme hakkÄ±</li>
                        <li>Veri taÅŸÄ±nabilirliÄŸi hakkÄ±</li>
                    </ul>
                </div>

                <div class="consent-options">
                    <label class="checkbox-container">
                        <input type="checkbox" id="locationConsent">
                        <span class="checkmark"></span>
                        <span class="consent-text">Konumumu gÃ¼venlik hizmetleri iÃ§in kullanÄ±lmasÄ±na <strong>aÃ§Ä±k
                                rÄ±za</strong> gÃ¶steriyorum</span>
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button id="acceptConsent" class="btn btn-primary" disabled>Kabul Et ve Devam Et</button>
                <button id="declineConsent" class="btn btn-secondary">Reddet</button>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="hidden">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">ğŸ›¡ï¸</span>
                    <span class="logo-text">GÃ¼venlik HaritasÄ±</span>
                </div>
                <div class="header-actions">
                    <button id="emergencyBtn" class="btn btn-emergency">
                        <span class="emergency-icon">ğŸš¨</span>
                        <span>ACÄ°L DURUM</span>
                    </button>
                    <button id="settingsBtn" class="btn btn-icon">âš™ï¸</button>
                </div>
            </div>
        </header>

        <!-- Control Panel -->
        <div class="control-panel">
            <div class="panel-section">
                <h3>ğŸ¯ GÃ¼venlik KatmanlarÄ±</h3>
                <div class="layer-controls">
                    <label class="layer-toggle">
                        <input type="checkbox" id="policeLayer" checked>
                        <span class="layer-icon">ğŸ‘®</span>
                        <span>Polis Karakolu</span>
                    </label>
                    <label class="layer-toggle">
                        <input type="checkbox" id="hospitalLayer" checked>
                        <span class="layer-icon">ğŸ¥</span>
                        <span>Hastane</span>
                    </label>
                    <label class="layer-toggle">
                        <input type="checkbox" id="pharmacyLayer" checked>
                        <span class="layer-icon">ğŸ’Š</span>
                        <span>Eczane</span>
                    </label>
                    <label class="layer-toggle">
                        <input type="checkbox" id="safeZoneLayer">
                        <span class="layer-icon">ğŸ›ï¸</span>
                        <span>GÃ¼venli BÃ¶lge</span>
                    </label>
                </div>
            </div>

            <div class="panel-section">
                <h3>ğŸ“¡ Konum PaylaÅŸÄ±mÄ±</h3>
                <div class="location-sharing">
                    <button id="shareLocationBtn" class="btn btn-share">
                        <span class="share-icon">ğŸ“</span>
                        <span>Konumumu PaylaÅŸ</span>
                    </button>
                    <div id="sharingStatus" class="sharing-status hidden">
                        <span class="status-indicator"></span>
                        <span class="status-text">Konum paylaÅŸÄ±lÄ±yor...</span>
                        <button id="stopSharingBtn" class="btn btn-stop">Durdur</button>
                    </div>
                </div>
            </div>

            <div class="panel-section">
                <h3>ğŸ—ºï¸ GÃ¼venli Rota</h3>
                <div class="route-planner">
                    <input type="text" id="destinationInput" placeholder="Nereye gitmek istiyorsunuz?"
                        class="route-input">
                    <button id="findRouteBtn" class="btn btn-route">GÃ¼venli Rota Bul</button>
                </div>
            </div>

            <div class="panel-section">
                <h3>ï¿½ SuÃ§ IsÄ± HaritasÄ±</h3>
                <div class="heatmap-controls">
                    <label class="layer-toggle">
                        <input type="checkbox" id="heatmapLayer">
                        <span class="layer-icon">ğŸ”¥</span>
                        <span>IsÄ± HaritasÄ±nÄ± GÃ¶ster</span>
                    </label>
                    <div class="heatmap-options">
                        <label>Zaman AralÄ±ÄŸÄ±:</label>
                        <select id="heatmapTimeRange" class="form-control-sm">
                            <option value="7">Son 7 GÃ¼n</option>
                            <option value="30" selected>Son 30 GÃ¼n</option>
                            <option value="90">Son 90 GÃ¼n</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="panel-section">
                <h3>ğŸ“Š Mahalle GÃ¼venlik Skoru</h3>
                <div class="neighborhood-safety">
                    <div id="currentNeighborhood" class="neighborhood-card">
                        <div class="neighborhood-name">Konum alÄ±nÄ±yor...</div>
                        <div class="safety-score-container">
                            <div class="safety-score" id="safetyScore">-</div>
                            <div class="safety-label">GÃ¼venlik Skoru</div>
                        </div>
                        <div class="safety-trend" id="safetyTrend"></div>
                    </div>
                    <button id="viewStatsBtn" class="btn btn-stats">
                        <span>ğŸ“ˆ</span>
                        <span>DetaylÄ± Ä°statistikler</span>
                    </button>
                </div>
            </div>

            <div class="panel-section">
                <h3>ï¿½ğŸ“¢ Topluluk RaporlarÄ±</h3>
                <div class="community-reports">
                    <button id="reportIncidentBtn" class="btn btn-report">
                        <span>âš ï¸</span>
                        <span>Olay Bildir</span>
                    </button>
                    <div id="recentReports" class="recent-reports">
                        <p class="no-reports">YakÄ±nÄ±nÄ±zda son rapor yok</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Map Container -->
        <div id="map" class="map-container" style="width: 100%; height: 80vh; min-height: 500px; display: block;"></div>

        <!-- Info Panel -->
        <div id="infoPanel" class="info-panel hidden">
            <button class="close-btn" id="closeInfoPanel">Ã—</button>
            <div id="infoPanelContent"></div>
        </div>

        <!-- Emergency Modal -->
        <div id="emergencyModal" class="modal hidden">
            <div class="modal-content emergency-content">
                <div class="modal-header emergency-header">
                    <h2>ğŸš¨ ACÄ°L DURUM</h2>
                </div>
                <div class="modal-body">
                    <p class="emergency-text">Acil durum hizmetlerini arayÄ±n:</p>
                    <div class="emergency-numbers">
                        <a href="tel:155" class="emergency-number">
                            <span class="number-icon">ğŸ‘®</span>
                            <span class="number-label">Polis</span>
                            <span class="number-value">155</span>
                        </a>
                        <a href="tel:112" class="emergency-number">
                            <span class="number-icon">ğŸš‘</span>
                            <span class="number-label">Ambulans</span>
                            <span class="number-value">112</span>
                        </a>
                        <a href="tel:110" class="emergency-number">
                            <span class="number-icon">ğŸš’</span>
                            <span class="number-label">Ä°tfaiye</span>
                            <span class="number-value">110</span>
                        </a>
                        <a href="tel:183" class="emergency-number">
                            <span class="number-icon">ğŸ†˜</span>
                            <span class="number-label">Alo 183</span>
                            <span class="number-value">183</span>
                        </a>
                    </div>
                    <div class="emergency-location">
                        <p><strong>Konumunuz:</strong></p>
                        <p id="emergencyLocationText">Konum alÄ±nÄ±yor...</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="closeEmergencyModal" class="btn btn-secondary">Kapat</button>
                </div>
            </div>
        </div>

        <!-- Statistics Modal -->
        <div id="statsModal" class="modal hidden">
            <div class="modal-content stats-modal">
                <div class="modal-header">
                    <h2>ğŸ“Š DetaylÄ± SuÃ§ Ä°statistikleri</h2>
                </div>
                <div class="modal-body">
                    <div class="stats-grid">
                        <!-- Crime Type Distribution -->
                        <div class="stat-card">
                            <h3>ğŸ¯ SuÃ§ TÃ¼rÃ¼ DaÄŸÄ±lÄ±mÄ±</h3>
                            <canvas id="crimeTypeChart"></canvas>
                        </div>

                        <!-- Time Analysis -->
                        <div class="stat-card">
                            <h3>â° Saat BazlÄ± Analiz</h3>
                            <canvas id="timeAnalysisChart"></canvas>
                        </div>

                        <!-- Neighborhood Comparison -->
                        <div class="stat-card full-width">
                            <h3>ğŸ—ºï¸ Mahalle KarÅŸÄ±laÅŸtÄ±rmasÄ±</h3>
                            <div id="neighborhoodComparison"></div>
                        </div>

                        <!-- Recent Incidents -->
                        <div class="stat-card full-width">
                            <h3>ğŸ“‹ Son Olaylar (Anonim)</h3>
                            <div id="recentIncidents" class="incidents-list"></div>
                        </div>

                        <!-- Safety Tips -->
                        <div class="stat-card full-width">
                            <h3>ğŸ’¡ GÃ¼venlik Ã–nerileri</h3>
                            <div id="safetyTips" class="safety-tips-list"></div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="closeStatsModal" class="btn btn-secondary">Kapat</button>
                </div>
            </div>
        </div>

        <!-- Report Modal -->
        <div id="reportModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>âš ï¸ Olay Bildirimi</h2>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Olay TÃ¼rÃ¼:</label>
                        <select id="incidentType" class="form-control">
                            <option value="suspicious">ÅÃ¼pheli Aktivite</option>
                            <option value="theft">HÄ±rsÄ±zlÄ±k</option>
                            <option value="accident">Kaza</option>
                            <option value="harassment">Taciz</option>
                            <option value="other">DiÄŸer</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>AÃ§Ä±klama:</label>
                        <textarea id="incidentDescription" class="form-control" rows="4"
                            placeholder="OlayÄ± kÄ±saca aÃ§Ä±klayÄ±n..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="anonymousReport" checked>
                            <span class="checkmark"></span>
                            <span class="consent-text">Anonim olarak bildir</span>
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="submitReport" class="btn btn-primary">GÃ¶nder</button>
                    <button id="closeReportModal" class="btn btn-secondary">Ä°ptal</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p class="loading-text">Harita yÃ¼kleniyor...</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="app.js"></script>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDYlOKldNTGDOhHFvoNeDZyCpA3x5CaG50&libraries=places,visualization&callback=initMap"></script>
</body>

</html>